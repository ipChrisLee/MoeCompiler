int dis[110][110];
int floyd(int n,int dis[][110],int m,int es[][2],int i,int j,int k,int z){
    k=1;
    while(k<=n){
        i=1;
        while(i<=n){
            j=1;
            while(j<=n){
                if(dis[i][j]>dis[i][k]+dis[k][j]){
                    dis[i][j]=dis[i][k]+dis[k][j];
                }
                j=j+1;
            }
            i=i+1;
        }
        k=k+1;
    }
    int res=0x3f3f3f3f;
    i=1;
    while(i<=n){
        while(j<=n){
            if(res>dis[i][j]){
                res=dis[i][j];
            }
            j=j+1;
        }
        i=i+1;
    }
    return res;
}
int n,m,es[110][2];
int main(){
    n=getint();m=getint();
    int i=1;
    while(i<=m){
        es[i][0]=getint();es[i][1]=getint();
        i=i+1;
    }
    int j;
    floyd(n,dis,m,es,1,1,1,1);
    return 0;
}
